# Подготовка компилируемого шаблона

Формат шаблона - [EJS](https://ejs.co)

Важные каталоги и файлы

> **/template** - каталог с готовым шаблоном (упаковывается в Zip архив для передачи заказчику) изначально содержит пример и обязательние ассеты (перечислены ниже)  
> **/test** - каталог для тестирования (создается и удаляется автоматически при каждом тесторовании)  
> **offer.json** - пример исходных данных (объекта) для подстановки в шаблон

Для работы с шаблоном необходимо, чтобы в системе был установлен [Node.js](https://nodejs.org/)

### Перед началом работы необходимо установить требуемые пакеты командой

    yarn

Разместить в каталог **template** подготовленный ejs шаблон

### Для тестирования компиляции необходимо выполнить команду

    yarn test

При этом будет создан каталог **test** со всей структурой и файлами ассетов, но при этом **index.ejs** будет скомпилирован в файл **index.html**, который можно открыть в браузере для проверки внешнего вида лендинга.

### Готовая сборка выполняется командой

    yarn build [name]

После чего в папке с проектом будет создан файл **_name_.zip**. Если после build не указывать имя будущего архива, то будет создан архив с именем **template.zip**. Расширение **.zip** будущего архива указывать не нужно!

## Требования к оформлению шаблона

Шаблон должен соответствовать следующи критериям

- должен содержать валидный EJS/HTML и относительные ссылки на ассеты, без "./" и "/" в начале ссылки
  пример:
  > src="css/style.css"
- не должен содержать
  - шаблонного кода, подстановочных переменных и т.д.
  - папку node_modules, а так же файлы управления пакетами (package.json, yarn.lock и т.д.)
  - файлы offer.json, index.html и другие служебные
- должен содержать:
  - файл index.ejs в корне
  - папки и файлы с ассетами (скрипты/изображения/фавикон и т.д.)
  - папку partials для компонентов ejs шаблона (если предусмотрено)

## Примерные шаги для создания шаблона:

1. Выполняем установку пакетов командой yarn.
2. Берем готовый лендинг и копируем в папку template.
3. Переименовываем index.html в index.ejs.
4. Заменяем блоки/данные на ejs шаблоны/переменные, если необходимо, в папке template создаем папку partials и туда складываем ejs компоненты (как правило - карточки товаров).
5. Компилируем локально командой yarn test и проверяем получившийся index.html и отображение лендинга в браузере. Если необходимо - корректируем index.ejs и/или partials и повторяем п. 5.
6. Если получившийся лендинг соответствует ТЗ, выполняем yarn build, после чего архив готов к отправке заказчику.

# Важно

- в папке template/js вместе с примером находятся javascript файлы, неоходимые для корректной работы лендинга в системе и которые необходимо подключить в блоке script, а именно:
  - custom.js - для корректной работы корзины
  - jquery\*.js - jQuery библиотека с плагинами
  - lazyload.js и slick.min.js - дополнительные библиотеки функционала лендинга
- так же необходимо добавить внешний javascript по ссылке - https://utgid.com/landing-bundle/bundle.js
